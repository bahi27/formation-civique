<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Formation Civique & Quiz</title>
    <style>
        :root { --bleu: #000091; --rouge: #e74c3c; --vert: #27ae60; --jaune: #ffe800; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: sans-serif; margin: 0; background: #f6f6f6; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        header { background: white; border-bottom: 2px solid var(--bleu); padding: 10px; text-align: center; flex-shrink: 0; }
        header h1 { font-size: 0.8rem; color: var(--bleu); margin: 0; text-transform: uppercase; }

        .theme-nav { background: var(--bleu); padding: 8px; flex-shrink: 0; }
        select { width: 100%; padding: 12px; font-size: 16px; font-weight: bold; border: none; background: white; color: var(--bleu); }

        main { flex: 1; overflow-y: auto; padding: 20px 15px 140px 15px; display: flex; flex-direction: column; align-items: center; }
        .content-container { width: 100%; max-width: 600px; text-align: center; }
        .desc-img { width: 100%; max-height: 200px; object-fit: contain; background: white; margin-bottom: 15px; border: 1px solid #ddd; }
        
        h2 { color: var(--bleu); font-size: 1.3rem; margin-bottom: 10px; }
        #content-area { line-height: 1.5; font-size: 1.6rem; font-weight: 500; color: #333; }
        .highlight { background-color: var(--jaune); color: black; padding: 2px; border-radius: 3px; }

        /* Style Quiz - Texte Noir Forc√© */
        .quiz-option { 
            display: block; width: 100%; padding: 18px; margin: 10px 0; 
            background-color: white !important; color: black !important; 
            border: 3px solid var(--bleu); font-size: 1.2rem; font-weight: bold; 
            border-radius: 8px; cursor: pointer; text-align: center;
        }
        .correct { background-color: var(--vert) !important; color: white !important; border-color: var(--vert); }
        .wrong { background-color: var(--rouge) !important; color: white !important; border-color: var(--rouge); }

        footer { position: fixed; bottom: 0; width: 100%; background: white; border-top: 3px solid var(--bleu); padding: 10px; z-index: 100; }
        .btn-row { display: flex; gap: 8px; }
        button { flex: 1; padding: 18px 5px; background: var(--bleu); color: white; border: 2px solid var(--bleu); font-weight: bold; text-transform: uppercase; cursor: pointer; }
        .btn-nav { background: white; color: var(--bleu); flex: 0 0 65px; font-size: 1.8rem; }

        #welcome { position: fixed; top:0; left:0; width:100%; height:100%; background: var(--bleu); color:white; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; text-align: center; padding: 20px; }
    </style>
</head>
<body>

<div id="welcome" onclick="initApp()">
    <h1 style="color:white; font-size: 2rem; margin-bottom: 10px;">FORMATION CIVIQUE</h1>
    <p>18 Fiches + Quiz Al√©atoire</p>
    <button style="background:white; color:var(--bleu); padding: 20px 40px; font-size: 1.2rem; border-radius: 8px;">COMMENCER</button>
</div>

<header><h1>R√©publique Fran√ßaise</h1></header>

<div class="theme-nav">
    <select id="theme-select" onchange="filterTheme()">
        <option value="devise">1. LA DEVISE (7 pages)</option>
        <option value="symboles">2. LES SYMBOLES (8 pages)</option>
        <option value="laicite">3. LA LA√èCIT√â (3 pages)</option>
        <option value="langue">4. LA LANGUE FRAN√áAISE</option>
        <option value="engagement">5. L'ENGAGEMENT</option>
        <option value="quiz">üöÄ 6. QUIZ AL√âATOIRE (20 Qs)</option>
    </select>
</div>

<main id="main-scroll">
    <div class="content-container" id="app-container"></div>
</main>

<footer id="footer-ctrl">
    <div class="btn-row">
        <button class="btn-nav" id="prev" onclick="changePage(-1)">‚Üê</button>
        <button onclick="startReading()">LIRE</button>
        <button onclick="stopReading()">STOP</button>
        <button class="btn-nav" id="next" onclick="changePage(1)">‚Üí</button>
    </div>
</footer>

<script>
    const data = [
        // DEVISE
        { theme: "devise", title: "La devise fran√ßaise", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/devise-et-symboles-de-la-republique/la-devise-francaise/marianne-devise.png", text: "Libert√©, √âgalit√©, Fraternit√© est la devise de la R√©publique fran√ßaise." },
        { theme: "devise", title: "La libert√©", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/devise-et-symboles-de-la-republique/la-liberte/liberte-img.png", text: "La libert√© est le droit d'agir et de s'exprimer librement." },
        { theme: "devise", title: "L'√©galit√© (1/3)", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/devise-et-symboles-de-la-republique/egalite-1/egalite-img.png", text: "L'√©galit√© signifie que la loi est la m√™me pour tous." },
        { theme: "devise", title: "L'√©galit√© (2/3)", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/devise-et-symboles-de-la-republique/egalite-2/egalite-fh-img.png", text: "Les hommes et les femmes ont les m√™mes droits." },
        { theme: "devise", title: "L'√©galit√© (3/3)", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/devise-et-symboles-de-la-republique/egalite-3/logo-dilcrah.png", text: "La discrimination est interdite par la loi." },
        { theme: "devise", title: "La fraternit√© (1/2)", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/devise-et-symboles-de-la-republique/fraternite-1/fraternite-img.png", text: "La fraternit√© est la solidarit√© entre tous les citoyens." },
        { theme: "devise", title: "La fraternit√© (2/2)", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/devise-et-symboles-de-la-republique/fraternite-2/fraternite-action-img.png", text: "Elle s'exprime par l'entraide et la protection sociale." },
        // SYMBOLES
        { theme: "symboles", title: "Le Drapeau", img: "https://upload.wikimedia.org/wikipedia/commons/c/c3/Flag_of_France.svg", text: "Le drapeau bleu, blanc, rouge est l'embl√®me national." },
        { theme: "symboles", title: "La Marseillaise", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/les-symboles-de-la-republique/la-marseillaise/marseillaise-img.png", text: "L'hymne national unit le peuple fran√ßais." },
        { theme: "symboles", title: "Marianne", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/les-symboles-de-la-republique/marianne/marianne-img.png", text: "Marianne incarne la R√©publique et la Libert√©." },
        { theme: "symboles", title: "Le 14 Juillet", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/les-symboles-de-la-republique/la-fete-nationale/14-juillet-img.png", text: "C'est la f√™te nationale fran√ßaise." },
        { theme: "symboles", title: "Le Coq", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/les-symboles-de-la-republique/le-coq/coq-img.png", text: "Le coq est le symbole de la fiert√© fran√ßaise." },
        { theme: "symboles", title: "Le Faisceau", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/les-symboles-de-la-republique/le-faisceau-de-licteur/faisceau-img.png", text: "Il repr√©sente l'union des citoyens." },
        { theme: "symboles", title: "Le Sceau", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/les-symboles-de-la-republique/le-sceau/sceau-img.png", text: "Il sert √† marquer les actes officiels de l'Etat." },
        { theme: "symboles", title: "Le Logotype", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/les-symboles-de-la-republique/le-logotype-de-letat/bloc-marque.png", text: "C'est la signature visuelle des minist√®res." },
        // AUTRES
        { theme: "laicite", title: "La√Øcit√©", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/la-laicite/la-laicite-principe-de-liberte/laicite-img.png", text: "La France est une R√©publique la√Øque." },
        { theme: "langue", title: "La Langue", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/la-langue-de-la-republique/langue-img.png", text: "Le fran√ßais est la langue officielle." },
        { theme: "engagement", title: "Engagement", img: "https://formation-civique.interieur.gouv.fr/fiches-par-thematiques/principes-et-valeurs-de-la-republique/contrat-dengagement-republicain/engagement-img.png", text: "Respecter les valeurs r√©publicaines." }
    ];

    const questions = [
        { q: "Quelle est la devise ?", a: ["Libert√©, √âgalit√©, Fraternit√©", "Travail, Famille"], c: 0 },
        { q: "Qui incarne la R√©publique ?", a: ["La Reine", "Marianne"], c: 1 },
        { q: "Date de la f√™te nationale ?", a: ["1er Mai", "14 Juillet"], c: 1 },
        { q: "Couleur du drapeau ?", a: ["Bleu, Blanc, Rouge", "Vert, Jaune, Rouge"], c: 0 },
        { q: "Le coq est un symbole ?", a: ["Vrai", "Faux"], c: 0 },
        { q: "La la√Øcit√© c'est...", a: ["La neutralit√© de l'√âtat", "L'interdiction des religions"], c: 0 },
        { q: "La langue de la France est ?", a: ["Le Fran√ßais", "L'Anglais"], c: 0 },
        { q: "Les femmes ont les m√™mes droits ?", a: ["Oui", "Non"], c: 0 },
        { q: "Le bonnet phrygien signifie ?", a: ["La Libert√©", "La Royaut√©"], c: 0 },
        { q: "La discrimination est ?", a: ["Interdite", "Autoris√©e"], c: 0 },
        { q: "O√π est inscrite la devise ?", a: ["Sur les mairies", "Sur les bus"], c: 0 },
        { q: "L'hymne s'appelle ?", a: ["La Marseillaise", "La Parisienne"], c: 0 },
        { q: "Le blanc du drapeau est ?", a: ["Le Roi", "Le Peuple"], c: 0 },
        { q: "Un agent public doit √™tre ?", a: ["Neutre", "Religieux"], c: 0 },
        { q: "La fraternit√© c'est ?", a: ["La solidarit√©", "Le sport"], c: 0 },
        { q: "La France est une ?", a: ["R√©publique", "Monarchie"], c: 0 },
        { q: "L'√©cole publique est ?", a: ["La√Øque", "Priv√©e"], c: 0 },
        { q: "On peut voter √† ?", a: ["18 ans", "16 ans"], c: 0 },
        { q: "Le sceau sert √† ?", a: ["Signer les lois", "D√©corer"], c: 0 },
        { q: "Le 14 juillet c√©l√®bre ?", a: ["La Bastille", "L'Hiver"], c: 0 }
    ];

    let filtered = []; let idx = 0; let isQuiz = false;
    const synth = window.speechSynthesis;

    function initApp() { document.getElementById('welcome').style.display = 'none'; filterTheme(); }

    function filterTheme() {
        stopReading();
        const sel = document.getElementById('theme-select').value;
        isQuiz = (sel === "quiz");
        document.getElementById('prev').style.visibility = isQuiz ? "hidden" : "visible";
        document.getElementById('next').style.visibility = isQuiz ? "hidden" : "visible";
        if(isQuiz) startQuiz();
        else { filtered = data.filter(d => d.theme === sel); idx = 0; display(); }
    }

    function display() {
        const item = filtered[idx];
        document.getElementById('app-container').innerHTML = `
            <h2>${item.title}</h2>
            <img src="${item.img}" class="desc-img">
            <div id="content-area">${item.text.split(' ').map((w,i)=>`<span id="w-${i}">${w}</span>`).join(' ')}</div>
        `;
    }

    function startQuiz() {
        const q = questions[Math.floor(Math.random() * questions.length)];
        let opts = q.a.map((o,i)=>`<button class="quiz-option" onclick="check(${i},${q.c},this)">${o}</button>`).join('');
        document.getElementById('app-container').innerHTML = `
            <h2>QUIZ AL√âATOIRE</h2>
            <p style="font-size:1.3rem; font-weight:bold; color:black;">${q.q}</p>${opts}
            <button onclick="startQuiz()" style="margin-top:20px; background:white; color:var(--bleu); width:100%;">SUIVANT ‚Üª</button>
        `;
        parler(q.q);
    }

    function check(i, c, btn) {
        if(i === c) { btn.classList.add('correct'); parler("Bravo !"); }
        else { btn.classList.add('wrong'); parler("Faux."); }
    }

    function parler(t) {
        synth.cancel();
        const u = new SpeechSynthesisUtterance(t);
        u.lang = 'fr-FR'; u.rate = 0.9;
        u.onboundary = (e) => {
            if(!isQuiz && e.name === 'word') {
                const wIdx = t.substring(0, e.charIndex).trim().split(/\s+/).length - 1;
                document.querySelectorAll('.highlight').forEach(s=>s.classList.remove('highlight'));
                const s = document.getElementById(`w-${wIdx}`);
                if(s) s.classList.add('highlight');
            }
        };
        synth.speak(u);
    }

    function startReading() { if(!isQuiz) parler(filtered[idx].text); }
    function stopReading() { synth.cancel(); }
    function changePage(d) { if(!isQuiz) { idx = (idx + d + filtered.length) % filtered.length; display(); } }
    window.onload = () => { if(window.speechSynthesis.onvoiceschanged !== undefined) synth.onvoiceschanged = () => {}; };
</script>
</body>
</html>
